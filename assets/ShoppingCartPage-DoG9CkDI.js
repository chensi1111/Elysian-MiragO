import{d as Xe,e as Ie,u as We,b as a,w as qe,f as Me,G as pe,V as Oe,W as Ue,i as Ee,O as Ge,r as F,o as n,j as l,k as i,C as c,J as z,B as o,F as le,p as ge,m as N,H as V,y as Je,U as Ke,S as oe,T as fe,z as Qe,l as ue,v as ve,A as Re,D as je,E as He,_ as Ye}from"./index-Cnln09QU.js";import{u as Ze}from"./favoriteProduct-BwCeb2C8.js";const m=$=>(je("data-v-21c2e71e"),$=$(),He(),$),es={class:"container"},ss={class:"title"},is={class:"content"},ts={class:"products"},as=m(()=>i("br",null,null,-1)),ns={class:"left"},ls={class:"pic"},os=["src"],us={class:"right"},vs={class:"top"},cs={class:"name"},rs=["onClick"],ds=m(()=>i("i",{class:"fa-solid fa-trash-can"},null,-1)),zs=[ds],ms={class:"types"},_s={class:"color"},gs={class:"size"},fs=m(()=>i("div",{class:"special"},"3件8折",-1)),ks={class:"mid"},Cs={class:"price"},hs={class:"quantity"},ys={class:"prices"},Ss={key:0,class:"totalPrice sale"},Ds={class:"bottom"},bs={class:"stocks"},Bs={key:0,class:"stock"},Ns={key:1,class:"stock less"},$s={key:2,class:"stock empty"},As={class:"buttons"},ws=["onClick"],Ps=m(()=>i("i",{class:"fa-solid fa-pen"},null,-1)),Ls=["onClick"],xs=m(()=>i("i",{class:"fa-solid fa-heart"},null,-1)),Fs={class:"infos"},Vs=m(()=>i("div",{class:"info-title"},"訂單詳情",-1)),Ts={class:"info-container"},Xs={key:0,class:"info"},Is={key:1,class:"info discount"},Ws={class:"info-container"},qs=m(()=>i("div",{class:"info"},"運費(5件免運)",-1)),Ms={class:"info"},ps={class:"info-container"},Os=m(()=>i("div",{class:"info"},"總計",-1)),Us={class:"info"},Es={class:"dialog"},Gs={class:"dialog-pic"},Js={class:"images-container"},Ks=["src"],Qs=["src"],Rs={class:"dialog-info"},js={class:"dialog-name"},Hs={class:"dialog-color"},Ys={class:"color-container"},Zs=["onClick"],ei={class:"dialog-sizes"},si={class:"size-container"},ii={class:"size-info"},ti={key:0,class:"stock"},ai={key:1,class:"stock less"},ni={key:2,class:"stock empty"},li=Xe({__name:"ShoppingCartPage",setup($){const v=Ie(),ke=Ze();We();const g=a(),h=a(),A=a(),Ce=a(),T=a(),w=a(),f=a();qe(()=>{g.value=v.cartItems,T.value=v.shippingFee,w.value=v.shippingWay,h.value=v.totalPrice,A.value=v.totalOriginalPrice,Ce.value=v.totalQuantity,f.value=v.dialogOpen}),Me(w,e=>{v.shippingWay=e});function y(e){return e.toLocaleString()}function he(e){let s=0;const _=Math.floor(e.quantity/3),r=e.quantity%3;return s+=_*3*e.price*.8,s+=r*e.price,s}function ye(e){v.removeItem(e.name,e.size,e.color)}const ce=a([]),re=a(""),de=a(""),P=a(""),S=a(""),D=a(""),X=a(""),Se=a(),I=a(""),W=a(""),q=a(""),M=a(""),p=a(""),O=a(""),U=a(""),E=a(""),G=a(""),J=a(""),K=a(""),Q=a(""),R=a(""),j=a(""),H=a(""),Y=a(""),Z=a(""),ee=a(""),se=a(""),ie=a(""),te=a(""),k=a(!1),De=a(),L=pe(()=>{switch(D.value){case"XS":return Number(I.value);case"S":return Number(W.value);case"M":return Number(q.value);case"L":return Number(M.value);case"XL":return Number(p.value);case"onesize":return Number(O.value);case"25":return Number(U.value);case"26":return Number(E.value);case"27":return Number(G.value);case"32A":return Number(J.value);case"32B":return Number(K.value);case"32C":return Number(Q.value);case"32D":return Number(R.value);case"34A":return Number(j.value);case"34B":return Number(H.value);case"34C":return Number(Y.value);case"34D":return Number(Z.value);case"36A":return Number(ee.value);case"36B":return Number(se.value);case"36C":return Number(ie.value);case"36D":return Number(te.value);default:return 0}});function ze(e){f.value=!0,re.value=e.img,de.value=e.img2,P.value=e.name,S.value=e.color,ce.value=e.availableColors,X.value=e.size,Se.value=e.stock,I.value=e.sizeXS,W.value=e.sizeS,q.value=e.sizeM,M.value=e.sizeL,p.value=e.sizeXL,U.value=e.size25,E.value=e.size26,G.value=e.size27,O.value=e.onesize,J.value=e.size32A,K.value=e.size32B,Q.value=e.size32C,R.value=e.size32D,j.value=e.size34A,H.value=e.size34B,Y.value=e.size34C,Z.value=e.size34D,ee.value=e.size36A,se.value=e.size36B,ie.value=e.size36C,te.value=e.size36D,De.value=e.id}function b(e){switch(e.confirmSize){case"XS":return e.sizeXS;case"S":return e.sizeS;case"M":return e.sizeM;case"L":return e.sizeL;case"XL":return e.sizeXL;case"onesize":return e.onesize;case"25":return e.size25;case"26":return e.size26;case"27":return e.size27;case"32A":return e.size32A;case"32B":return e.size32B;case"32C":return e.size32C;case"32D":return e.size32D;case"34A":return e.size34A;case"34B":return e.size34B;case"34C":return e.size34C;case"34D":return e.size34D;case"36A":return e.size36A;case"36B":return e.size36B;case"36C":return e.size36C;case"36D":return e.size36D;default:return e.stock}}function u(e){D.value=e,k.value=!0}function me(){k.value=!1,f.value=!1,d.value=0,ae()}function be(){D.value?(v.switchSize(P.value,S.value,X.value,D.value),me()):oe.confirm("請先選擇尺寸","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"})}const d=a(0);function Be(){d.value<1&&(d.value+=1),ae()}function Ne(){d.value>0&&(d.value-=1),ae()}function ae(){const e=document.querySelector(".images-container");e&&(e.style.transform=`translateX(-${d.value*100}%)`)}function $e(e,s,_,r){S.value=r;const C=v.switchColor(e,s,_,r);ze(C),v.closeDialog==!0&&(f.value=!1)}function Ae(e){e.favorite?fe({message:"商品已存在喜愛清單",type:"warning",plain:!0}):(e.favorite=!0,ke.toggleFavorite(e),we(),v.addFavorite(e.name,e.size,e.color))}const we=()=>{const e=JSON.parse(localStorage.getItem("favoriteStatus")||"{}"),s=g.value.reduce((r,C)=>(r[C.id]=C.favorite,r),{}),_={...e,...s};localStorage.setItem("favoriteStatus",JSON.stringify(_))},x=Je(),Pe=Ke(),Le=Oe(),_e=a();Ue(Le,e=>{e&&(_e.value=e)});function xe(){g.value.length?_e.value?x.push({path:"/confirm"}):oe.confirm("請先登入會員","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{x.push({path:"/login",query:{redirect:Pe.fullPath}})}).catch(()=>{fe({type:"warning",message:"已取消"})}):oe.confirm("購物車為空","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"})}const ne=Ee(),Fe=Ge();function Ve(e){ne.isSale=!1,Fe.currentGender==="man"?(x.push({path:"/man/clothes"}),ne.typeFilter=e):(x.push({path:"/woman/clothes"}),ne.typeFilter=e)}return(e,s)=>{const _=F("el-input-number"),r=F("el-option"),C=F("el-select"),Te=F("el-dialog");return n(),l(le,null,[i("div",es,[i("div",ss,"購物車("+c(g.value.length)+")",1),i("div",is,[i("div",ts,[g.value.length?o("",!0):(n(),l("div",{key:0,class:"remind",onClick:s[0]||(s[0]=t=>Ve(""))},[z("您的購物車為空"),as,z("點我馬上選購")])),(n(!0),l(le,null,ge(g.value,t=>(n(),l("div",{class:"product",key:t.id},[i("div",ns,[i("div",ls,[i("img",{src:t.img},null,8,os)])]),i("div",us,[i("div",vs,[i("div",cs,c(t.name),1),i("div",{class:"cancle",onClick:B=>ye(t)},zs,8,rs)]),i("div",ms,[i("div",_s,"顏色 : "+c(t.color),1),i("div",gs,"尺寸 : "+c(t.confirmSize||t.size),1),fs]),i("div",ks,[i("div",Cs,"TWD "+c(y(t.price)),1),i("div",hs,[N(_,{min:1,max:b(t),modelValue:t.quantity,"onUpdate:modelValue":B=>t.quantity=B},null,8,["max","modelValue","onUpdate:modelValue"])]),i("div",ys,[i("div",{class:"totalPrice",style:Qe({textDecoration:t.quantity>2?"line-through":"none"})}," TWD "+c(y(t.quantity*t.price)),5),t.quantity>2?(n(),l("div",Ss,"TWD "+c(y(he(t))),1)):o("",!0)])]),i("div",Ds,[i("div",bs,[b(t)>=5?(n(),l("div",Bs,"尚有庫存")):o("",!0),b(t)>0&&b(t)<5?(n(),l("div",Ns,"較少庫存 ")):o("",!0),b(t)==0?(n(),l("div",$s,"庫存不足")):o("",!0)]),i("div",As,[i("div",{class:"button",onClick:B=>ze(t)},[Ps,z("修改")],8,ws),i("div",{class:"button",onClick:B=>Ae(t)},[xs,z("移至喜愛清單")],8,Ls)])])])]))),128))]),i("div",Fs,[Vs,i("div",Ts,[A.value-h.value>0?(n(),l("div",Xs,"訂單折扣")):o("",!0),A.value-h.value>0?(n(),l("div",Is,"TWD "+c(y(A.value-h.value)),1)):o("",!0)]),N(C,{modelValue:w.value,"onUpdate:modelValue":s[1]||(s[1]=t=>w.value=t)},{default:V(()=>[N(r,{value:"宅配"},{default:V(()=>[z("宅配")]),_:1}),N(r,{value:"到店自取"},{default:V(()=>[z("到店自取")]),_:1})]),_:1},8,["modelValue"]),i("div",Ws,[qs,i("div",Ms,"TWD "+c(T.value),1)]),i("div",ps,[Os,i("div",Us,"TWD "+c(y(h.value+T.value)),1)]),i("div",{class:"confirm",onClick:xe},"結帳")])])]),N(Te,{modelValue:f.value,"onUpdate:modelValue":s[23]||(s[23]=t=>f.value=t),class:"dialog-container","before-close":me},{default:V(()=>[i("div",Es,[i("div",Gs,[ue(i("div",{class:"arrow-left fa-solid fa-caret-left",onClick:Ne},null,512),[[ve,d.value]]),i("div",Js,[i("img",{src:re.value},null,8,Ks),i("img",{src:de.value},null,8,Qs)]),ue(i("div",{class:"arrow-right fa-solid fa-caret-right",onClick:Be},null,512),[[ve,!d.value]])]),i("div",Rs,[i("div",js,c(P.value),1),i("div",Hs,[z("顏色 : "),i("span",null,c(S.value),1)]),i("div",Ys,[(n(!0),l(le,null,ge(ce.value,t=>(n(),l("div",{key:t,class:Re(["color",t]),onClick:B=>$e(P.value,S.value,X.value,t)},null,10,Zs))),128))]),i("div",ei,[z("尺碼 : "),i("span",null,c(D.value),1),i("div",si,[I.value!==void 0?(n(),l("div",{key:0,class:"dialog-size",onClick:s[2]||(s[2]=t=>u("XS"))},"XS")):o("",!0),W.value!==void 0?(n(),l("div",{key:1,class:"dialog-size",onClick:s[3]||(s[3]=t=>u("S"))},"S")):o("",!0),q.value!==void 0?(n(),l("div",{key:2,class:"dialog-size",onClick:s[4]||(s[4]=t=>u("M"))},"M")):o("",!0),M.value!==void 0?(n(),l("div",{key:3,class:"dialog-size",onClick:s[5]||(s[5]=t=>u("L"))},"L")):o("",!0),p.value!==void 0?(n(),l("div",{key:4,class:"dialog-size",onClick:s[6]||(s[6]=t=>u("XL"))},"XL")):o("",!0),O.value!==void 0?(n(),l("div",{key:5,class:"dialog-size onesize",onClick:s[7]||(s[7]=t=>u("onesize"))}," onesize")):o("",!0),U.value!==void 0?(n(),l("div",{key:6,class:"dialog-size",onClick:s[8]||(s[8]=t=>u("25"))},"25")):o("",!0),E.value!==void 0?(n(),l("div",{key:7,class:"dialog-size",onClick:s[9]||(s[9]=t=>u("26"))},"26")):o("",!0),G.value!==void 0?(n(),l("div",{key:8,class:"dialog-size",onClick:s[10]||(s[10]=t=>u("27"))},"27")):o("",!0),J.value!==void 0?(n(),l("div",{key:9,class:"dialog-size",onClick:s[11]||(s[11]=t=>u("32A"))},"32A")):o("",!0),K.value!==void 0?(n(),l("div",{key:10,class:"dialog-size",onClick:s[12]||(s[12]=t=>u("32B"))},"32B")):o("",!0),Q.value!==void 0?(n(),l("div",{key:11,class:"dialog-size",onClick:s[13]||(s[13]=t=>u("32C"))},"32C")):o("",!0),R.value!==void 0?(n(),l("div",{key:12,class:"dialog-size",onClick:s[14]||(s[14]=t=>u("32D"))},"32D")):o("",!0),j.value!==void 0?(n(),l("div",{key:13,class:"dialog-size",onClick:s[15]||(s[15]=t=>u("34A"))},"34A")):o("",!0),H.value!==void 0?(n(),l("div",{key:14,class:"dialog-size",onClick:s[16]||(s[16]=t=>u("34B"))},"34B")):o("",!0),Y.value!==void 0?(n(),l("div",{key:15,class:"dialog-size",onClick:s[17]||(s[17]=t=>u("34C"))},"34C")):o("",!0),Z.value!==void 0?(n(),l("div",{key:16,class:"dialog-size",onClick:s[18]||(s[18]=t=>u("34D"))},"34D")):o("",!0),ee.value!==void 0?(n(),l("div",{key:17,class:"dialog-size",onClick:s[19]||(s[19]=t=>u("36A"))},"36A")):o("",!0),se.value!==void 0?(n(),l("div",{key:18,class:"dialog-size",onClick:s[20]||(s[20]=t=>u("36B"))},"36B")):o("",!0),ie.value!==void 0?(n(),l("div",{key:19,class:"dialog-size",onClick:s[21]||(s[21]=t=>u("36C"))},"36C")):o("",!0),te.value!==void 0?(n(),l("div",{key:20,class:"dialog-size",onClick:s[22]||(s[22]=t=>u("36D"))},"36D")):o("",!0)])]),ue(i("div",ii,"選擇尺寸以查看庫存",512),[[ve,!k.value]]),k.value&&L.value>=5?(n(),l("div",ti,"尚有庫存")):o("",!0),k.value&&L.value>0&&L.value<5?(n(),l("div",ai,"較少庫存")):o("",!0),k.value&&L.value===0?(n(),l("div",ni,"庫存不足")):o("",!0),i("div",{class:"update",onClick:be},"更新")])])]),_:1},8,["modelValue"])],64)}}}),vi=Ye(li,[["__scopeId","data-v-21c2e71e"]]);export{vi as default};
