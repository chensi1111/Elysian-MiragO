import{d as Se,e as _e,u as ye,b as l,g as $e,w as be,G as he,O as Be,i as Ne,r as De,o as t,j as n,k as a,l as _,v as y,F as se,p as ue,m as Ae,H as Le,y as Ie,C as u,J as D,z as ce,B as o,A as we,D as Pe,E as Xe,S as Fe,T as xe,_ as Me}from"./index-Cnln09QU.js";import{u as Te}from"./favoriteProduct-BwCeb2C8.js";const Ve=$=>(Pe("data-v-483ee260"),$=$(),Xe(),$),Oe={class:"container"},Ee=Ve(()=>a("div",{class:"title"},"您的喜愛列表",-1)),Ge={class:"info"},Je={class:"pic"},je=["src"],qe={class:"detail"},Re={class:"name"},He={class:"details"},Ke={class:"data"},Ue={class:"price"},We={key:0},Qe={class:"stock"},Ye={key:0},Ze={key:1,class:"less"},pe={key:2,class:"none"},es={class:"buttons"},ss=["onClick"],is=["onClick"],as=["onClick"],ls={class:"dialog"},ts={class:"dialog-pic"},ns={class:"images-container"},os=["src"],rs=["src"],vs={class:"dialog-info"},us={class:"dialog-name"},cs={class:"dialog-color"},ds={class:"color-container"},zs=["onClick"],ms={class:"dialog-sizes"},gs={class:"size-container"},Cs={class:"size-info"},fs={key:0,class:"size-stock"},ks={key:1,class:"size-stock less"},Ss={key:2,class:"size-stock empty"},_s={class:"dialog-price"},ys={key:0},$s=Se({__name:"FavoritePage",setup($){const C=Te(),c=_e(),ie=ye(),d=l([]);$e(()=>{d.value=C.favoriteItems}),be(()=>{d.value=C.favoriteItems});const ae=l([]);function b(e){return e.toLocaleString()}const h=l(!1),le=l(""),te=l(""),B=l(""),f=l(""),k=l(""),A=l(""),L=l(""),I=l(""),w=l(""),P=l(""),X=l(""),F=l(""),x=l(""),M=l(""),T=l(""),V=l(""),O=l(""),E=l(""),G=l(""),J=l(""),j=l(""),q=l(""),R=l(""),H=l(""),K=l(""),U=l(""),m=l(!1),W=l(),Q=l(),Y=l(),N=he(()=>{switch(k.value){case"XS":return Number(A.value);case"S":return Number(L.value);case"M":return Number(I.value);case"L":return Number(w.value);case"XL":return Number(P.value);case"onesize":return Number(X.value);case"25":return Number(F.value);case"26":return Number(x.value);case"27":return Number(M.value);case"32A":return Number(T.value);case"32B":return Number(V.value);case"32C":return Number(O.value);case"32D":return Number(E.value);case"34A":return Number(G.value);case"34B":return Number(J.value);case"34C":return Number(j.value);case"34D":return Number(q.value);case"36A":return Number(R.value);case"36B":return Number(H.value);case"36C":return Number(K.value);case"36D":return Number(U.value);default:return 0}});function Z(e){h.value=!0,le.value=e.img,te.value=e.img2,B.value=e.name,f.value=e.color,ae.value=e.availableColors,A.value=e.sizeXS,L.value=e.sizeS,I.value=e.sizeM,w.value=e.sizeL,P.value=e.sizeXL,F.value=e.size25,x.value=e.size26,M.value=e.size27,X.value=e.onesize,T.value=e.size32A,V.value=e.size32B,O.value=e.size32C,E.value=e.size32D,G.value=e.size34A,J.value=e.size34B,j.value=e.size34C,q.value=e.size34D,R.value=e.size36A,H.value=e.size36B,K.value=e.size36C,U.value=e.size36D,W.value=e.price,Q.value=e.sale,Y.value=e.id}function S(e){switch(e.confirmSize){case"XS":return e.sizeXS;case"S":return e.sizeS;case"M":return e.sizeM;case"L":return e.sizeL;case"XL":return e.sizeXL;case"onesize":return e.onesize;case"25":return e.size25;case"26":return e.size26;case"27":return e.size27;case"32A":return e.size32A;case"32B":return e.size32B;case"32C":return e.size32C;case"32D":return e.size32D;case"34A":return e.size34A;case"34B":return e.size34B;case"34C":return e.size34C;case"34D":return e.size34D;case"36A":return e.size36A;case"36B":return e.size36B;case"36C":return e.size36C;case"36D":return e.size36D;default:return null}}function r(e){k.value=e,m.value=!0}function de(e){C.toggleFavorite(e),ne(e),c.loadFromLocalStorage()}const ne=e=>{let s=localStorage.getItem("favoriteStatus"),v=s?JSON.parse(s):{};v[e.id]=!1,localStorage.setItem("favoriteStatus",JSON.stringify(v))};function oe(){m.value=!1,h.value=!1,z.value=0,p()}function ze(){d.value=d.value.map(e=>e.id===Y.value?{...e,color:f.value,confirmSize:k.value}:e),C.updateConfirmSize(Y.value,k.value),oe()}const z=l(0);function me(){z.value<1&&(z.value+=1),p()}function ge(){z.value>0&&(z.value-=1),p()}function p(){const e=document.querySelector(".images-container");e&&(e.style.transform=`translateX(-${z.value*100}%)`)}function Ce(e){const s=l();ve.currentGender==="man"?s.value=ie.manProductList:s.value=ie.womanProductList;const v=s.value.find(i=>i.color===e&&i.name===B.value);if(v){const i=d.value.findIndex(g=>g.name===B.value&&g.color===f.value);i!==-1&&(d.value[i]=v,f.value=e,Z(v))}}function fe(e){if(e.confirmSize){const s=e.sale?e.price*.5:e.price,v={...e,price:s,size:e.confirmSize,stock:S(e),quantity:1};c.addItem(v),c.openCart(),c.clearCloseCartTimeout(),c.closeCartTimeout=setTimeout(()=>{c.closeCart(),c.closeCartTimeout=null},2e3),C.toggleFavorite(e),ne(e),c.loadFromLocalStorage()}else Fe.confirm("請先選擇商品尺寸","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{Z(e)}).catch(()=>{xe({type:"error",message:"添加失敗"})})}const re=Ie(),ve=Be(),ee=Ne();function ke(e){ee.isSale=!1,ve.currentGender==="man"?(re.push({path:"/man/clothes"}),ee.typeFilter=e):(re.push({path:"/woman/clothes"}),ee.typeFilter=e)}return(e,s)=>{const v=De("el-dialog");return t(),n(se,null,[a("div",Oe,[Ee,_(a("div",{class:"remind",onClick:s[0]||(s[0]=i=>ke(""))},"您的喜愛列表為空，點我馬上去選購",512),[[y,!d.value.length]]),(t(!0),n(se,null,ue(d.value,i=>(t(),n("div",{class:"product",key:i.name},[a("div",Ge,[a("div",Je,[a("img",{src:i.img},null,8,je)]),a("div",qe,[a("div",Re,u(i.name),1),a("div",He,[a("div",Ke,"顏色 : "+u(i.color),1),_(a("div",{class:"data"},"尺碼 : "+u(i.confirmSize),513),[[y,i.confirmSize]]),a("div",Ue,[D("價錢 : "),a("span",{style:ce({textDecoration:i.sale?"line-through":"none"})}," $"+u(b(i.price)),5),i.sale?(t(),n("span",We,"$"+u(b(i.price*.5)),1)):o("",!0)])]),a("div",Qe,[S(i)>=5?(t(),n("span",Ye,"尚有庫存")):o("",!0),S(i)<5&&S(i)>0?(t(),n("span",Ze,"較少庫存")):o("",!0),S(i)==0?(t(),n("span",pe,"庫存不足")):o("",!0)]),a("div",es,[a("div",{class:"button",onClick:g=>Z(i)},"選擇尺寸",8,ss),a("div",{class:"button",onClick:g=>fe(i)},"新增至購物車",8,is)])]),a("div",{class:"delete fa-regular fa-trash-can",onClick:g=>de(i)},null,8,as)])]))),128))]),Ae(v,{modelValue:h.value,"onUpdate:modelValue":s[22]||(s[22]=i=>h.value=i),class:"dialog-container","before-close":oe},{default:Le(()=>[a("div",ls,[a("div",ts,[_(a("div",{class:"arrow-left fa-solid fa-caret-left",onClick:ge},null,512),[[y,z.value]]),a("div",ns,[a("img",{src:le.value},null,8,os),a("img",{src:te.value},null,8,rs)]),_(a("div",{class:"arrow-right fa-solid fa-caret-right",onClick:me},null,512),[[y,!z.value]])]),a("div",vs,[a("div",us,u(B.value),1),a("div",cs,[D("顏色 : "),a("span",null,u(f.value),1)]),a("div",ds,[(t(!0),n(se,null,ue(ae.value,i=>(t(),n("div",{key:i,class:we(["color",i]),onClick:g=>Ce(i)},null,10,zs))),128))]),a("div",ms,[D("尺碼 : "),a("span",null,u(k.value),1),a("div",gs,[A.value!==void 0?(t(),n("div",{key:0,class:"dialog-size",onClick:s[1]||(s[1]=i=>r("XS"))},"XS")):o("",!0),L.value!==void 0?(t(),n("div",{key:1,class:"dialog-size",onClick:s[2]||(s[2]=i=>r("S"))},"S")):o("",!0),I.value!==void 0?(t(),n("div",{key:2,class:"dialog-size",onClick:s[3]||(s[3]=i=>r("M"))},"M")):o("",!0),w.value!==void 0?(t(),n("div",{key:3,class:"dialog-size",onClick:s[4]||(s[4]=i=>r("L"))},"L")):o("",!0),P.value!==void 0?(t(),n("div",{key:4,class:"dialog-size",onClick:s[5]||(s[5]=i=>r("XL"))},"XL")):o("",!0),X.value!==void 0?(t(),n("div",{key:5,class:"dialog-size onesize",onClick:s[6]||(s[6]=i=>r("onesize"))}," onesize")):o("",!0),F.value!==void 0?(t(),n("div",{key:6,class:"dialog-size",onClick:s[7]||(s[7]=i=>r("25"))},"25")):o("",!0),x.value!==void 0?(t(),n("div",{key:7,class:"dialog-size",onClick:s[8]||(s[8]=i=>r("26"))},"26")):o("",!0),M.value!==void 0?(t(),n("div",{key:8,class:"dialog-size",onClick:s[9]||(s[9]=i=>r("27"))},"27")):o("",!0),T.value!==void 0?(t(),n("div",{key:9,class:"dialog-size",onClick:s[10]||(s[10]=i=>r("32A"))},"32A")):o("",!0),V.value!==void 0?(t(),n("div",{key:10,class:"dialog-size",onClick:s[11]||(s[11]=i=>r("32B"))},"32B")):o("",!0),O.value!==void 0?(t(),n("div",{key:11,class:"dialog-size",onClick:s[12]||(s[12]=i=>r("32C"))},"32C")):o("",!0),E.value!==void 0?(t(),n("div",{key:12,class:"dialog-size",onClick:s[13]||(s[13]=i=>r("32D"))},"32D")):o("",!0),G.value!==void 0?(t(),n("div",{key:13,class:"dialog-size",onClick:s[14]||(s[14]=i=>r("34A"))},"34A")):o("",!0),J.value!==void 0?(t(),n("div",{key:14,class:"dialog-size",onClick:s[15]||(s[15]=i=>r("34B"))},"34B")):o("",!0),j.value!==void 0?(t(),n("div",{key:15,class:"dialog-size",onClick:s[16]||(s[16]=i=>r("34C"))},"34C")):o("",!0),q.value!==void 0?(t(),n("div",{key:16,class:"dialog-size",onClick:s[17]||(s[17]=i=>r("34D"))},"34D")):o("",!0),R.value!==void 0?(t(),n("div",{key:17,class:"dialog-size",onClick:s[18]||(s[18]=i=>r("36A"))},"36A")):o("",!0),H.value!==void 0?(t(),n("div",{key:18,class:"dialog-size",onClick:s[19]||(s[19]=i=>r("36B"))},"36B")):o("",!0),K.value!==void 0?(t(),n("div",{key:19,class:"dialog-size",onClick:s[20]||(s[20]=i=>r("36C"))},"36C")):o("",!0),U.value!==void 0?(t(),n("div",{key:20,class:"dialog-size",onClick:s[21]||(s[21]=i=>r("36D"))},"36D")):o("",!0)])]),_(a("div",Cs,"選擇尺寸以查看庫存",512),[[y,!m.value]]),m.value&&N.value>=5?(t(),n("div",fs,"尚有庫存")):o("",!0),m.value&&N.value>0&&N.value<5?(t(),n("div",ks,"較少庫存")):o("",!0),m.value&&N.value===0?(t(),n("div",Ss,"庫存不足")):o("",!0),a("div",_s,[D(" 價錢 : "),a("span",{style:ce({textDecoration:Q.value?"line-through":"none"})}," $"+u(b(W.value)),5),Q.value?(t(),n("span",ys,"$"+u(b(W.value*.5)),1)):o("",!0)]),a("div",{class:"update",onClick:ze},"更新")])])]),_:1},8,["modelValue"])],64)}}}),Bs=Me($s,[["__scopeId","data-v-483ee260"]]);export{Bs as default};
