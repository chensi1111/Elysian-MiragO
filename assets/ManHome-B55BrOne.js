import{d as ue,a as de,u as ve,b as l,w as fe,e as he,f as H,g as pe,n as X,h as _e,i as me,r as U,o as c,j as r,k as s,l as G,v as K,m as Q,F as x,p as Z,q as Se,s as ge,t as Ce,x as ye,y as ke,z as ee,A as we,B as S,C as g,D as ze,E as Le,_ as be}from"./index-Cnln09QU.js";import{u as Te}from"./favoriteProduct-BwCeb2C8.js";const C=w=>(ze("data-v-7703f8f7"),w=w(),Le(),w),Pe={class:"poster"},Fe=C(()=>s("div",{class:"info"},"活動限定",-1)),Be=C(()=>s("div",{class:"info sale"},"低至5折",-1)),Ie=C(()=>s("div",{class:"title"},"活動限定款式:低至5折",-1)),Me={class:"products-container"},Ee=["onClick"],Xe=["onClick"],xe=C(()=>s("div",{class:"special"},"活動限定",-1)),We={key:0,class:"cover"},Re=C(()=>s("div",{class:"choose"},"選擇您的尺碼",-1)),Ne={class:"sizes"},$e=["onClick"],qe=["onClick"],De=["onClick"],Ve=["onClick"],Ye=["onClick"],Je={class:"product-infos"},Oe={class:"product-info"},je={class:"price"},Ae={class:"product-info discount"},He={class:"product-info normal"},Ue=C(()=>s("div",{class:"product-info more-discount"},"3件8折",-1)),Ge={class:"styles"},Ke={class:"topic"},Qe={class:"options"},Ze=["onClick"],et=["onClick"],tt=ue({__name:"ManHome",setup(w){const te=de([{topic:"夏日衣櫥",image:Se,option1:"選購T恤",option2:"選購牛仔褲",type1:"suit",type2:"jeans"},{topic:"內衣首選",image:ge,option1:"選購平口褲",option2:"選購三角褲",type1:"boxers",type2:"briefs"},{topic:"運動穿搭",image:Ce,option1:"選購運動T恤",option2:"選購運動短褲",type1:"gym-suit",type2:"sport-pant"},{topic:"時尚配件",image:ye,option1:"選購包款",option2:"選購帽款",type1:"bag",type2:"hat"}]),W=Te(),oe=ve(),p=l([]),R=l([]);fe(()=>{R.value=oe.manProductList.map(t=>({...t,favorite:W.favoriteItems.some(o=>o.id===t.id)})),p.value=R.value.filter(t=>t.sale).slice(0,10)});function N(t){return t.toLocaleString()}const d=he(),y=(t,o,i,u)=>{t.stopPropagation();const e={...o,price:o.price*.5,size:i,stock:u,quantity:1};d.addItem(e),d.openCart(),d.clearCloseCartTimeout(),d.closeCartTimeout=setTimeout(()=>{d.closeCart(),d.closeCartTimeout=null},2e3)};function se(t,o){t.stopPropagation(),o.favorite=!o.favorite,W.toggleFavorite(o),ie(),d.loadFromLocalStorage()}const ie=()=>{const t=JSON.parse(localStorage.getItem("favoriteStatus")||"{}"),o=p.value.reduce((u,e)=>(u[e.id]=e.favorite,u),{}),i={...t,...o};localStorage.setItem("favoriteStatus",JSON.stringify(i))},ae=()=>{const t=localStorage.getItem("favoriteStatus");if(t){const o=JSON.parse(t);p.value.forEach(i=>{i.favorite=o[i.id]})}},v=l(null),T=l(0),z=()=>{X(()=>{if(v.value){const t=v.value.querySelector(".product");if(t){const o=t.getBoundingClientRect();T.value=o.width}}})},$=l(!0),q=l(!0),f=l(0),_=l(6),P=l(0);function F(){P.value=p.value.length-_.value}function B(){$.value=f.value>0,q.value=f.value<P.value}let m=!1;const h=l(20),n=l(window.innerWidth);function D(){n.value=window.innerWidth}function I(){n.value<=1200&&n.value>1024&&(h.value=10,_.value=5),n.value<=1024&&n.value>767&&(h.value=10,_.value=4),n.value<=767&&n.value>600&&(h.value=10,_.value=3),n.value<=600&&n.value>=414&&(h.value=10,_.value=2),n.value<414&&(h.value=8,_.value=2),F()}const V=()=>{v.value&&!m&&(m=!0,L(!1),f.value>0&&(f.value--,v.value.scrollBy({left:-(T.value+h.value),behavior:"smooth"})),setTimeout(()=>{m=!1,L(!0)},300))},Y=()=>{v.value&&!m&&(m=!0,L(!1),f.value<P.value&&(f.value++,v.value.scrollBy({left:T.value+h.value,behavior:"smooth"})),setTimeout(()=>{m=!1,L(!0)},300))};let J=0,O=0,k=!1;const ne=t=>{const o=t.touches[0];J=o.clientX,O=o.clientY,k=!0},le=t=>{if(!k)return;const o=t.touches[0],i=o.clientX-J,u=o.clientY-O;Math.abs(i)>Math.abs(u)&&(i>30?(V(),k=!1):i<-30&&(Y(),k=!1))},ce=()=>{k=!1},L=t=>{const o=document.querySelector(".scroll-button.left"),i=document.querySelector(".scroll-button.right");o&&i&&(o.disabled=!t,i.disabled=!t)};H(f,()=>{B()}),pe(async()=>{await X(),z(),F(),I(),window.addEventListener("resize",D),window.addEventListener("resize",z),window.addEventListener("resize",I),B()}),_e(()=>{window.removeEventListener("resize",D),window.removeEventListener("resize",z),window.addEventListener("resize",I)}),H(p,async()=>{await X(),z(),F(),B(),ae()});const M=ke(),b=me();function j(t){b.isSale=!1,M.push({path:"/man/clothes"}).then(()=>{b.typeFilter=t})}function A(t){b.isSale=!0,M.push({path:"/man/clothes"}).then(()=>{b.typeFilter=t})}function re(t){M.push({path:"/product",query:t})}return(t,o)=>{const i=U("CaretLeft"),u=U("CaretRight");return c(),r(x,null,[s("div",Pe,[Fe,Be,s("div",{class:"info small",onClick:o[0]||(o[0]=e=>A(""))},"立即選購")]),Ie,s("div",Me,[G(s("div",{class:"scroll-button left",onClick:V},[Q(i)],512),[[K,$.value]]),s("div",{class:"products",ref_key:"productsRef",ref:v},[(c(!0),r(x,null,Z(p.value,(e,E)=>(c(),r("div",{class:"product",key:E,onClick:a=>re(e)},[s("div",{class:"product-container",style:ee({backgroundImage:`url(${e.img})`}),onTouchstart:ne,onTouchmove:le,onTouchend:ce},[s("i",{class:we(["fa-heart",e.favorite?"fa-solid":"fa-regular"]),onClick:a=>se(a,e)},null,10,Xe),xe,n.value>=767?(c(),r("div",We,[Re,s("div",Ne,[e.sizeXS!==void 0?(c(),r("div",{key:0,class:"size",onClick:a=>y(a,e,"XS",e.sizeXS)},"XS",8,$e)):S("",!0),e.sizeS!==void 0?(c(),r("div",{key:1,class:"size",onClick:a=>y(a,e,"S",e.sizeS)},"S",8,qe)):S("",!0),e.sizeM!==void 0?(c(),r("div",{key:2,class:"size",onClick:a=>y(a,e,"M",e.sizeM)},"M",8,De)):S("",!0),e.sizeL!==void 0?(c(),r("div",{key:3,class:"size",onClick:a=>y(a,e,"L",e.sizeL)},"L",8,Ve)):S("",!0),e.sizeXL!==void 0?(c(),r("div",{key:4,class:"size",onClick:a=>y(a,e,"XL",e.sizeXL)},"XL",8,Ye)):S("",!0)])])):S("",!0)],36),s("div",Je,[s("div",Oe,g(e.name),1),s("div",je,[s("div",Ae,"TWD"+g(N(e.price*.5)),1),s("div",He,"TWD"+g(N(e.price)),1)]),Ue])],8,Ee))),128))],512),G(s("div",{class:"scroll-button right",onClick:Y},[Q(u)],512),[[K,q.value]]),s("div",{class:"more",onClick:o[1]||(o[1]=e=>A(""))},"更多優惠款式")]),s("div",Ge,[(c(!0),r(x,null,Z(te,(e,E)=>(c(),r("div",{class:"style",key:E,style:ee({backgroundImage:`url(${e.image})`})},[s("div",Ke,g(e.topic),1),s("div",Qe,[s("div",{class:"option",onClick:a=>j(e.type1)},g(e.option1),9,Ze),s("div",{class:"option",onClick:a=>j(e.type2)},g(e.option2),9,et)])],4))),128))])],64)}}}),it=be(tt,[["__scopeId","data-v-7703f8f7"]]);export{it as default};
