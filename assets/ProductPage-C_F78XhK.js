import{d as M,O as N,u as T,b as k,w as x,G as O,e as F,g as G,o as i,j as l,k as v,C as f,z as E,B as a,J as p,F as J,p as j,A as r,U as V,S as W,D as q,E as R,_ as K}from"./index-Cnln09QU.js";import{u as U}from"./favoriteProduct-BwCeb2C8.js";const B=S=>(q("data-v-6e275a2e"),S=S(),R(),S),Y={class:"container"},H={class:"left"},Q={class:"pic"},Z=["src"],h={class:"pic"},ee=["src"],se={class:"right"},te={class:"infos"},ie={class:"name"},le={class:"prices"},ae={key:0,class:"price"},oe={key:1,class:"discount"},ue=B(()=>v("div",{class:"discount"},"3件8折",-1)),re={class:"info"},ne={class:"colors"},ve=["onClick"],de={class:"info"},ce={class:"sizes"},ze={key:0,class:"remind"},Ce={key:1,class:"stock"},ke={key:2,class:"stock less"},fe={key:3,class:"stock empty"},Se={class:"buttons"},me=B(()=>v("div",{class:"detail"},null,-1)),ge=M({__name:"ProductPage",setup(S){const D=V(),$=N(),g=T(),A=U(),c=D.query,e=k(),m=k();x(()=>{e.value={...c,id:Number(c.id),favorite:c.favorite==="true"},typeof c.availableColors=="string"?m.value=[c.availableColors]:m.value=c.availableColors});function L(u){switch(u){case"Black":return"黑色";case"White":return"白色";case"Blue":return"藍色";case"Green":return"綠色";case"Brown":return"棕色";case"Gray":return"灰色";case"Red":return"紅色";case"Pink":return"粉色";case"Yellow":return"黃色";default:return""}}const y=k(!1),o=k();function n(u){o.value=u,y.value=!0}const z=O(()=>{switch(o.value){case"XS":return e.value.sizeXS;case"S":return e.value.sizeS;case"M":return e.value.sizeM;case"L":return e.value.sizeL;case"XL":return e.value.sizeX;case"onesize":return e.value.onesize;case"25":return e.value.size25;case"26":return e.value.size26;case"27":return e.value.size27;case"32A":return e.value.size32A;case"32B":return e.value.size32B;case"32C":return e.value.size32C;case"32D":return e.value.size32D;case"34A":return e.value.size34A;case"34B":return e.value.size34B;case"34C":return e.value.size34C;case"34D":return e.value.size34D;case"36A":return e.value.size36A;case"36B":return e.value.size36B;case"36C":return e.value.size36C;case"36D":return e.value.size36D;default:return""}});function _(u){const s=k();$.currentGender==="man"?s.value=g.manProductList:s.value=g.womanProductList;const t=s.value.find(C=>C.name===e.value.name&&C.color===u);t&&(e.value=t,console.log(t,"change"))}function P(u){u.favorite=!u.favorite,A.toggleFavorite(u),I(u),d.loadFromLocalStorage()}const I=u=>{let s=localStorage.getItem("favoriteStatus"),t=s?JSON.parse(s):{};t[u.id]=u.favorite,localStorage.setItem("favoriteStatus",JSON.stringify(t))},X=()=>{const u=localStorage.getItem("favoriteStatus");if(u){const s=JSON.parse(u);e.value.favorite=s[e.value.id]}},d=F(),w=(u,s,t)=>{if(!o.value)W.alert("請選擇尺寸","提示",{confirmButtonText:"OK"});else{const C=u.sale?u.price*.5:u.price,b={...u,price:C,size:s,stock:t,img:u.originalImg||u.img,quantity:1};d.addItem(b),d.openCart(),d.clearCloseCartTimeout(),d.closeCartTimeout=setTimeout(()=>{d.closeCart(),d.closeCartTimeout=null},2e3)}};return G(()=>{X()}),(u,s)=>(i(),l("div",Y,[v("div",H,[v("div",Q,[v("img",{src:e.value.originalImg||e.value.img},null,8,Z)]),v("div",h,[v("img",{src:e.value.img2},null,8,ee)])]),v("div",se,[v("div",te,[v("div",ie,f(e.value.name),1),v("div",le,[v("div",{class:"price",style:E({textDecoration:e.value.sale?"line-through":"none"})},"TWD"+f(e.value.price),5),e.value.sale?(i(),l("div",ae,"TWD"+f(e.value.price*.5),1)):a("",!0),e.value.sale?(i(),l("div",oe,"5折")):a("",!0)]),ue,v("div",re,[p("顏色 : "),v("span",null,f(L(e.value.color)),1)]),v("div",ne,[(i(!0),l(J,null,j(m.value,t=>(i(),l("div",{key:t,class:r(["color",t]),onClick:C=>_(t)},null,10,ve))),128))]),v("div",de,[p("尺寸 : "),v("span",null,f(o.value),1)]),v("div",ce,[e.value.sizeXS!==void 0?(i(),l("div",{key:0,class:r(["size",{selected:o.value=="XS"}]),onClick:s[0]||(s[0]=t=>n("XS"))},"XS",2)):a("",!0),e.value.sizeS!==void 0?(i(),l("div",{key:1,class:r(["size",{selected:o.value=="S"}]),onClick:s[1]||(s[1]=t=>n("S"))},"S",2)):a("",!0),e.value.sizeM!==void 0?(i(),l("div",{key:2,class:r(["size",{selected:o.value=="M"}]),onClick:s[2]||(s[2]=t=>n("M"))},"M",2)):a("",!0),e.value.sizeL!==void 0?(i(),l("div",{key:3,class:r(["size",{selected:o.value=="L"}]),onClick:s[3]||(s[3]=t=>n("L"))},"L",2)):a("",!0),e.value.sizeXL!==void 0?(i(),l("div",{key:4,class:r(["size",{selected:o.value=="XL"}]),onClick:s[4]||(s[4]=t=>n("XL"))},"XL",2)):a("",!0),e.value.onesize!==void 0?(i(),l("div",{key:5,class:r(["size onesize",{selected:o.value=="onesize"}]),onClick:s[5]||(s[5]=t=>n("onesize"))},"onesize",2)):a("",!0),e.value.size25!==void 0?(i(),l("div",{key:6,class:r(["size",{selected:o.value=="25"}]),onClick:s[6]||(s[6]=t=>n("25"))},"25",2)):a("",!0),e.value.size26!==void 0?(i(),l("div",{key:7,class:r(["size",{selected:o.value=="26"}]),onClick:s[7]||(s[7]=t=>n("26"))},"26",2)):a("",!0),e.value.size27!==void 0?(i(),l("div",{key:8,class:r(["size",{selected:o.value=="27"}]),onClick:s[8]||(s[8]=t=>n("27"))},"27",2)):a("",!0),e.value.size32A!==void 0?(i(),l("div",{key:9,class:r(["size",{selected:o.value=="32A"}]),onClick:s[9]||(s[9]=t=>n("32A"))},"32A",2)):a("",!0),e.value.size32B!==void 0?(i(),l("div",{key:10,class:r(["size",{selected:o.value=="32B"}]),onClick:s[10]||(s[10]=t=>n("32B"))},"32B",2)):a("",!0),e.value.size32C!==void 0?(i(),l("div",{key:11,class:r(["size",{selected:o.value=="32C"}]),onClick:s[11]||(s[11]=t=>n("32C"))},"32C",2)):a("",!0),e.value.size32D!==void 0?(i(),l("div",{key:12,class:r(["size",{selected:o.value=="32D"}]),onClick:s[12]||(s[12]=t=>n("32D"))},"32D",2)):a("",!0),e.value.size34A!==void 0?(i(),l("div",{key:13,class:r(["size",{selected:o.value=="34A"}]),onClick:s[13]||(s[13]=t=>n("34A"))},"34A",2)):a("",!0),e.value.size34B!==void 0?(i(),l("div",{key:14,class:r(["size",{selected:o.value=="34B"}]),onClick:s[14]||(s[14]=t=>n("34B"))},"34B",2)):a("",!0),e.value.size34C!==void 0?(i(),l("div",{key:15,class:r(["size",{selected:o.value=="34C"}]),onClick:s[15]||(s[15]=t=>n("34C"))},"34C",2)):a("",!0),e.value.size34D!==void 0?(i(),l("div",{key:16,class:r(["size",{selected:o.value=="34D"}]),onClick:s[16]||(s[16]=t=>n("34D"))},"34D",2)):a("",!0),e.value.size36A!==void 0?(i(),l("div",{key:17,class:r(["size",{selected:o.value=="36A"}]),onClick:s[17]||(s[17]=t=>n("36A"))},"36A",2)):a("",!0),e.value.size36B!==void 0?(i(),l("div",{key:18,class:r(["size",{selected:o.value=="36B"}]),onClick:s[18]||(s[18]=t=>n("36B"))},"36B",2)):a("",!0),e.value.size36C!==void 0?(i(),l("div",{key:19,class:r(["size",{selected:o.value=="36C"}]),onClick:s[19]||(s[19]=t=>n("36C"))},"36C",2)):a("",!0),e.value.size36D!==void 0?(i(),l("div",{key:20,class:r(["size",{selected:o.value=="36D"}]),onClick:s[20]||(s[20]=t=>n("36D"))},"36D",2)):a("",!0)]),y.value?a("",!0):(i(),l("div",ze,"選擇尺寸以查看庫存")),z.value>=5?(i(),l("div",Ce,"尚有庫存")):a("",!0),z.value>0&&z.value<5?(i(),l("div",ke,"較少庫存")):a("",!0),z.value===0?(i(),l("div",fe,"庫存不足")):a("",!0),v("div",Se,[v("div",{class:"add",onClick:s[21]||(s[21]=t=>w(e.value,o.value,z.value))},"新增至購物車"),v("div",{class:r(["favorite",["fa-heart",e.value.favorite?"fa-solid":"fa-regular"]]),onClick:s[22]||(s[22]=t=>P(e.value))},null,2)]),me])])]))}}),Be=K(ge,[["__scopeId","data-v-6e275a2e"]]);export{Be as default};
