import{d as D,b as l,G as I,V as R,g as F,h as K,r as k,o as M,j as T,m as r,A as i,P as j,k as s,J as z,l as g,v as b,C as m,H as C,F as G,y as H,a4 as J,a5 as Z,a6 as $,Z as q,$ as O,T as Q,_ as X}from"./index-Cnln09QU.js";const Y={class:"dialog-footer"},ee=D({__name:"LoginRegister",setup(ae){const p=l(""),f=l(""),_=I(()=>p.value+f.value),v=l(""),w=l(""),V=l(""),y=l(""),d=l(),n=l(),u=l(),c=l(),N=l(3),h=l(!1),B=R(),E=()=>{if(d.value="",n.value="",u.value="",c.value="",!_.value){d.value="請輸入姓名";return}if(!v.value){n.value="請輸入信箱";return}if(!w.value){c.value="請輸入電話號碼";return}if(V.value!==y.value){u.value="密碼不相同";return}J(B,v.value,V.value).then(async t=>{const e=t.user;try{await Z(e,{displayName:_.value}),await $(q(O,"users",e.uid),{phone:w.value,firstName:p.value,lastName:f.value,userName:_.value,email:v.value}),h.value=!0;const o=setInterval(()=>{N.value--,N.value===0&&(clearInterval(o),L())},1e3)}catch(o){Q({message:"註冊失敗",type:"error"}),console.log(o)}}).catch(t=>{console.log("error",t),t.code==="auth/invalid-email"&&(n.value="請輸入正確Email"),t.code==="auth/email-already-in-use"?n.value="該email已使用":(t.code==="auth/missing-password"&&(u.value="密碼不能為空"),t.code==="auth/weak-password"&&(u.value="密碼不能少於6位數"))})},x=H();function L(){h.value=!1,x.push({path:"/"})}function S(){x.push({path:"/login"})}const P=l("500"),U=()=>{P.value=window.innerWidth<767?"300":"500"};return F(()=>{U(),window.addEventListener("resize",U)}),K(()=>{window.removeEventListener("resize",U)}),(t,e)=>{const o=k("el-input"),W=k("el-button"),A=k("el-dialog");return M(),T(G,null,[r(o,{placeholder:"姓氏",modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),class:i({"error-border":d.value})},null,8,["modelValue","class"]),r(o,{placeholder:"名字",modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=a=>f.value=a),class:i({"error-border":d.value})},null,8,["modelValue","class"]),r(o,{placeholder:"信箱",modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=a=>v.value=a),class:i({"error-border":n.value})},null,8,["modelValue","class"]),r(o,{placeholder:"電話號碼",modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=a=>w.value=a),class:i({"error-border":c.value})},null,8,["modelValue","class"]),r(o,{placeholder:"請輸入最少6位數密碼",modelValue:V.value,"onUpdate:modelValue":e[4]||(e[4]=a=>V.value=a),"show-password":"",class:i({"error-border":u.value})},null,8,["modelValue","class"]),r(o,{placeholder:"確認密碼",modelValue:y.value,"onUpdate:modelValue":e[5]||(e[5]=a=>y.value=a),"show-password":"",class:i({"error-border":u.value}),onKeydown:j(E,["enter"])},null,8,["modelValue","class"]),s("div",{class:"button",onClick:E},"註冊"),s("div",{class:"notice"},[z("已經有帳號?"),s("span",{onClick:S},"點我登入")]),g(s("div",{class:"error"},m(d.value),513),[[b,d.value]]),g(s("div",{class:"error"},m(c.value),513),[[b,c.value]]),g(s("div",{class:"error"},m(n.value),513),[[b,n.value]]),g(s("div",{class:"error"},m(u.value),513),[[b,u.value]]),r(A,{modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=a=>h.value=a),title:"提示",width:P.value},{footer:C(()=>[s("div",Y,[r(W,{type:"primary",onClick:L},{default:C(()=>[z(" 確認 ")]),_:1})])]),default:C(()=>[s("span",null,"登入成功，"+m(N.value)+"秒後將自動跳轉",1)]),_:1},8,["modelValue","width"])],64)}}}),oe=X(ee,[["__scopeId","data-v-d73263ba"]]);export{oe as default};
