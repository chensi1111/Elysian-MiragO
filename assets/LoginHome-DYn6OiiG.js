import{d as B,b as a,V as L,O as R,g as U,a2 as p,h as W,r as f,o as A,j as G,k as o,m as c,A as C,P as H,l as k,v as y,C as h,H as _,F as N,y as P,J as D,a3 as F,_ as K}from"./index-Cnln09QU.js";const j={class:"inputs"},q={class:"dialog-footer"},J=B({__name:"LoginHome",setup(M){const r=a(),i=a(),t=a(),e=a(),d=a(!1),v=a(3),E=L(),w=()=>{if(t.value="",e.value="",!r.value){t.value="Email不能為空";return}if(!i.value){e.value="密碼不能為空";return}F(E,r.value,i.value).then(()=>{d.value=!0;const l=setInterval(()=>{v.value--,v.value===0&&(clearInterval(l),g())},1e3)}).catch(l=>{l.code==="auth/invalid-email"&&(t.value="請輸入正確Email"),l.code==="auth/missing-password"&&(e.value="密碼不能為空"),l.code==="auth/invalid-credential"&&(e.value="密碼錯誤")})},n=P(),I=R();function S(){n.push({path:"/login/register"})}function g(){d.value=!1,p.value?n.push(p.value):I.currentGender==="man"?n.push({path:"/man"}):n.push({path:"/woman"})}const V=a("500"),m=()=>{V.value=window.innerWidth<767?"300":"500"};return U(()=>{m(),window.addEventListener("resize",m),p.value=n.currentRoute.value.query.redirect||"/"}),W(()=>{window.removeEventListener("resize",m)}),(l,s)=>{const b=f("el-input"),x=f("el-button"),z=f("el-dialog");return A(),G(N,null,[o("div",j,[c(b,{placeholder:"信箱",modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=u=>r.value=u),class:C({"error-border":t.value})},null,8,["modelValue","class"]),c(b,{placeholder:"密碼",modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=u=>i.value=u),"show-password":"",class:C({"error-border":e.value}),onKeydown:H(w,["enter"])},null,8,["modelValue","class"])]),o("div",{class:"button",onClick:w},"登入"),o("div",{class:"button",onClick:S},"建立新帳戶"),k(o("div",{class:"error"},h(t.value),513),[[y,t.value]]),k(o("div",{class:"error"},h(e.value),513),[[y,e.value]]),c(z,{modelValue:d.value,"onUpdate:modelValue":s[2]||(s[2]=u=>d.value=u),title:"提示",width:V.value},{footer:_(()=>[o("div",q,[c(x,{type:"primary",onClick:g},{default:_(()=>[D(" 確認 ")]),_:1})])]),default:_(()=>[o("span",null,"登入成功，"+h(v.value)+"秒後將自動跳轉",1)]),_:1},8,["modelValue","width"])],64)}}}),T=K(J,[["__scopeId","data-v-33d9f0bc"]]);export{T as default};
