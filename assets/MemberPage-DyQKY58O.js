import{d as ce,V as re,b as o,W as ve,g as me,G as pe,f as Z,r as F,o as s,j as n,k as e,C as r,B as i,J as h,m as y,c as C,H as E,l as $,v as q,y as _e,Y as fe,Z as w,$ as b,a5 as he,a7 as T,T as D,S as m,a8 as ye,a9 as ke,aa as Ve,ab as ge,F as z,p as K,D as Ce,E as we,_ as be}from"./index-Cnln09QU.js";import{T as Ne}from"./TheOrders-EQKlWCYF.js";const W=N=>(Ce("data-v-a382c8a7"),N=N(),we(),N),xe={class:"member"},Be={class:"welcome"},Ue={class:"infos-container"},Ee={class:"left"},Te={class:"block"},De={class:"top"},Se=W(()=>e("div",{class:"title"},"個人資料",-1)),Ae={class:"more-container"},Me={key:0,class:"bottom"},Ie={class:"infos"},Pe={class:"info"},Oe={key:0,class:"names"},Fe={class:"infos"},We={class:"info"},je={key:0,class:"remind"},Ge={class:"infos"},He={class:"info"},Je={class:"block"},Le=W(()=>e("div",{class:"title"},"寄件地址",-1)),Re={class:"buttons"},Ye={key:0,class:"input"},Ze={class:"address"},$e={class:"error"},qe={key:1,class:"input"},ze={class:"error"},Ke={key:2,class:"info"},Qe={class:"right"},Xe={class:"block"},ea=W(()=>e("div",{class:"title"},"處理中訂單",-1)),aa=ce({__name:"MemberPage",setup(N){const j=_e(),G=re(),u=o();ve(G,t=>{t&&(u.value=t,k(t))});const d=o(),k=async t=>{if(t){const a=await fe(w(b,"users",t.uid));a.exists()&&(d.value=a.data())}};me(()=>{u.value&&k(u.value)});const V=o(),g=o(),H=pe(()=>V.value+g.value),p=o(),x=o(),S=o(),c=o(!1),A=o(!0);function Q(){d.value.email==u.value.email?A.value=!0:A.value=!1}Z(d,t=>{V.value=t.firstName,g.value=t.lastName,p.value=t.email,x.value=t.phone,Q()});function X(){c.value=!0}function ee(){c.value=!1}function ae(){he(u.value,{displayName:H.value}).then(()=>{T(w(b,"users",u.value.uid),{firstName:V.value,lastName:g.value,userName:H.value}),D({message:"姓名更新成功",type:"success"}),k(u.value)}).catch(t=>{console.log(t)})}async function se(){await T(w(b,"users",u.value.uid),{phone:x.value}),D({message:"電話號碼更新成功",type:"success"}),k(u.value)}async function le(){if(u.value)if(p.value===d.value.email)m.alert("新信箱不得與舊信箱相同","提示",{confirmButtonText:"確認"});else{const t=ye.credential(u.value.email,S.value);try{await ke(u.value,t),await Ve(u.value,p.value),m.alert("驗證信已成功發送，請查看您的新信箱","提示",{confirmButtonText:"確認"}).then(()=>{T(w(b,"users",u.value.uid),{email:p.value}),m.alert("請在驗證新信箱後再重新登入","提示",{confirmButtonText:"確認"}).then(()=>{ge(G),j.push({path:"/login"})})}).catch(()=>{})}catch(a){console.error("驗證信發送失敗",a),a.code==="auth/missing-password"&&m.alert("密碼不得為空","提示",{confirmButtonText:"確認"}),a.code==="auth/invalid-credential"&&m.alert("密碼錯誤","提示",{confirmButtonText:"確認"}),a.code==="auth/missing-new-email"&&m.alert("信箱不得為空","提示",{confirmButtonText:"確認"}),a.code==="auth/invalid-new-email"&&m.alert("信箱格式錯誤","提示",{confirmButtonText:"確認"})}}}const _=o(),B=o(),U=o(),M=o(!0),I=o(!0),P=o(!0),v=o(!1),J=o([]),te={基隆市:["仁愛區","信義區","中正區","中山區","安樂區","暖暖區","七堵區"],台北市:["中正區","大同區","中山區","松山區","大安區","萬華區","信義區","士林區","北投區","內湖區","南港區","文山區"],新北市:["萬里區","金山區","板橋區","汐止區","深坑區","石碇區","瑞芳區","平溪區","雙溪區","貢寮區","新店區","坪林區","烏來區","永和區","中和區","土城區","三峽區","樹林區","鶯歌區","三重區","新莊區","泰山區","林口區","蘆洲區","五股區","八里區","淡水區","三芝區","石門區"],桃園市:["中壢區","平鎮區","龍潭區","楊梅區","新屋區","觀音區","桃園區","龜山區","八德區","大溪區","復興區","大園區","蘆竹區"],新竹市:["東區","北區","香山區"],新竹縣:["竹北市","湖口鄉","新豐鄉","新埔鎮","關西鎮","芎林鄉","寶山鄉","竹東鎮","五峰鄉","橫山鄉","尖石鄉","北埔鄉","峨眉鄉"],苗栗縣:["竹南鎮","頭份市","三灣鄉","南庄鄉","獅潭鄉","後龍鎮","通霄鎮","苑裡鎮","苗栗市","造橋鄉","頭屋鄉","公館鄉","大湖鄉","泰安鄉","銅鑼鄉","三義鄉","西湖鄉","卓蘭鎮"],台中市:["中區","東區","南區","西區","北區","北屯區","西屯區","南屯區","太平區","大里區","霧峰區","烏日區","豐原區","后里區","石岡區","東勢區","和平區","新社區","潭子區","大雅區","神岡區","大肚區","沙鹿區","龍井區","梧棲區","清水區","大甲區","外埔區","大安區"],彰化縣:["彰化市","芬園鄉","花壇鄉","秀水鄉","鹿港鎮","福興鄉","線西鄉","和美鎮","伸港鄉","員林市","社頭鄉","永靖鄉","埔心鄉","溪湖鎮","大村鄉","埔鹽鄉","田中鎮","北斗鎮","田尾鄉","埤頭鄉","溪州鄉","竹塘鄉","二林鎮","大城鄉","芳苑鄉","二水鄉"],南投縣:["南投市","中寮鄉","草屯鎮","國姓鄉","埔里鎮","仁愛鄉","名間鄉","集集鎮","水里鄉","魚池鄉","信義鄉","竹山鎮","鹿谷鄉"],雲林縣:["斗南鎮","大埤鄉","虎尾鎮","土庫鎮","褒忠鄉","東勢鄉","台西鄉","崙背鄉","麥寮鄉","斗六市","林內鄉","古坑鄉","莿桐鄉","西螺鎮","二崙鄉","北港鎮","水林鄉","口湖鄉","四湖鄉","元長鄉"],嘉義市:["東區","西區"],嘉義縣:["番路鄉","梅山鄉","竹崎鄉","阿里山鄉","中埔鄉","大埔鄉","水上鄉","鹿草鄉","太保市","朴子市","東石鄉","六腳鄉","新港鄉","民雄鄉","大林鎮","溪口鄉","義竹鄉","布袋鎮"],台南市:["中西區","東區","南區","北區","安平區","安南區","永康區","歸仁區","新化區","左鎮區","玉井區","楠西區","南化區","仁德區","關廟區","龍崎區","官田區","麻豆區","佳里區","西港區","七股區","將軍區","學甲區","北門區","新營區","後壁區","白河區","東山區","六甲區","下營區","柳營區","鹽水區","善化區","大內區","山上區","新市區","安定區"],高雄市:["新興區","前金區","苓雅區","鹽埕區","鼓山區","旗津區","前鎮區","三民區","楠梓區","小港區","左營區","仁武區","大社區","岡山區","路竹區","阿蓮區","田寮區","燕巢區","橋頭區","梓官區","彌陀區","永安區","湖內區","鳳山區","大寮區","林園區","鳥松區","大樹區","旗山區","美濃區","六龜區","內門區","杉林區","甲仙區","桃源區","那瑪夏區","茂林區","茄萣區"],屏東縣:["屏東市","三地門鄉","霧台鄉","瑪家鄉","九如鄉","里港鄉","高樹鄉","鹽埔鄉","長治鄉","麟洛鄉","竹田鄉","內埔鄉","萬丹鄉","潮州鎮","泰武鄉","來義鄉","萬巒鄉","崁頂鄉","新埤鄉","南州鄉","林邊鄉","東港鎮","琉球鄉","佳冬鄉","新園鄉","枋寮鄉","枋山鄉","春日鄉","獅子鄉","車城鄉","牡丹鄉","恆春鎮","滿州鄉"],澎湖縣:["馬公市","西嶼鄉","望安鄉","七美鄉","白沙鄉","湖西鄉"],宜蘭縣:["宜蘭市","頭城鎮","礁溪鄉","壯圍鄉","員山鄉","羅東鎮","三星鄉","大同鄉","五結鄉","冬山鄉","蘇澳鎮","南澳鄉","釣魚台"],花蓮縣:["花蓮市","新城鄉","秀林鄉","吉安鄉","壽豐鄉","鳳林鎮","光復鄉","豐濱鄉","瑞穗鄉","萬榮鄉","玉里鎮","卓溪鄉","富里鄉"],台東縣:["台東市","綠島鄉","蘭嶼鄉","延平鄉","卑南鄉","鹿野鄉","關山鎮","海端鄉","池上鄉","東河鄉","成功鎮","長濱鄉","太麻里鄉","金峰鄉","大武鄉","達仁鄉"],金門縣:["金沙鎮","金湖鎮","金寧鄉","金城鎮","烈嶼鄉","烏坵鄉"]},oe=o(["基隆市","台北市","新北市","桃園市","新竹市","新竹縣","苗栗縣","台中市","彰化縣","南投縣","雲林縣","嘉義市","嘉義縣","台南市","高雄市","屏東縣","澎湖縣","宜蘭縣","花蓮縣","台東縣","金門縣"]);Z(_,t=>{J.value=te[t]||[]});function ue(){v.value=!0}function ne(){v.value=!1}async function ie(){M.value=!!_.value,I.value=!!B.value,P.value=!!U.value,M.value&&I.value&&P.value?(await T(w(b,"users",u.value.uid),{country:_.value,district:B.value,address:U.value}),D({message:"地址新增成功",type:"success"}),k(u.value),v.value=!1):D({message:"請輸入完整資訊",type:"error"})}function de(){j.push({path:"/orders"})}return(t,a)=>{var Y;const f=F("el-input"),L=F("el-option"),R=F("el-select");return s(),n("div",xe,[e("div",Be,r((Y=u.value)==null?void 0:Y.displayName)+"，歡迎回來",1),e("div",Ue,[e("div",Ee,[e("div",Te,[e("div",De,[Se,e("div",Ae,[c.value?i("",!0):(s(),n("div",{key:0,class:"more",onClick:X},"更改")),c.value?(s(),n("div",{key:1,class:"more",onClick:ee},"取消")):i("",!0)])]),d.value?(s(),n("div",Me,[e("div",Ie,[e("div",Pe,[h("名字"),e("span",null,r(d.value.userName),1)]),c.value?(s(),n("div",{key:0,class:"change",onClick:ae},"儲存")):i("",!0)]),c.value?(s(),n("div",Oe,[y(f,{modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=l=>V.value=l),placeholder:"姓氏"},null,8,["modelValue"]),y(f,{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=l=>g.value=l),placeholder:"名字"},null,8,["modelValue"])])):i("",!0),e("div",Fe,[e("div",We,[h("信箱"),e("span",null,r(d.value.email),1)]),A.value?i("",!0):(s(),n("div",je,"尚未驗證")),c.value?(s(),n("div",{key:1,class:"change",onClick:le},"儲存")):i("",!0)]),c.value?(s(),C(f,{key:1,modelValue:p.value,"onUpdate:modelValue":a[2]||(a[2]=l=>p.value=l),placeholder:"信箱"},null,8,["modelValue"])):i("",!0),c.value?(s(),C(f,{key:2,modelValue:S.value,"onUpdate:modelValue":a[3]||(a[3]=l=>S.value=l),placeholder:"請輸入密碼已進行驗證","show-password":""},null,8,["modelValue"])):i("",!0),e("div",Ge,[e("div",He,[h("電話號碼"),e("span",null,r(d.value.phone),1)]),c.value?(s(),n("div",{key:0,class:"change",onClick:se},"儲存")):i("",!0)]),c.value?(s(),C(f,{key:3,modelValue:x.value,"onUpdate:modelValue":a[4]||(a[4]=l=>x.value=l),placeholder:"電話號碼"},null,8,["modelValue"])):i("",!0)])):i("",!0)]),e("div",Je,[Le,e("div",Re,[v.value?i("",!0):(s(),n("div",{key:0,class:"button",onClick:ue},"新增地址")),v.value?(s(),n("div",{key:1,class:"button",onClick:ne},"取消")):i("",!0),v.value?(s(),n("div",{key:2,class:"button",onClick:ie},"確認地址")):i("",!0)]),v.value?(s(),n("div",Ye,[e("div",Ze,[y(R,{modelValue:_.value,"onUpdate:modelValue":a[5]||(a[5]=l=>_.value=l),placeholder:"縣市"},{default:E(()=>[(s(!0),n(z,null,K(oe.value,(l,O)=>(s(),C(L,{key:O,value:l},{default:E(()=>[h(r(l),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),y(R,{modelValue:B.value,"onUpdate:modelValue":a[6]||(a[6]=l=>B.value=l),placeholder:"鄉鎮市區",disabled:!_.value},{default:E(()=>[(s(!0),n(z,null,K(J.value,(l,O)=>(s(),C(L,{key:O,value:l},{default:E(()=>[h(r(l),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","disabled"])]),$(e("div",$e,"此為必填項目",512),[[q,!M.value||!I.value]])])):i("",!0),v.value?(s(),n("div",qe,[y(f,{type:"text",modelValue:U.value,"onUpdate:modelValue":a[7]||(a[7]=l=>U.value=l),placeholder:"地址"},null,8,["modelValue"]),$(e("div",ze,"此為必填項目",512),[[q,!P.value]])])):i("",!0),d.value.address?(s(),n("div",Ke,[h("地址"),e("span",null,r(d.value.country)+" "+r(d.value.district)+" "+r(d.value.address),1)])):i("",!0)])]),e("div",Qe,[e("div",Xe,[e("div",{class:"order-title"},[ea,e("div",{class:"manage",onClick:de},"訂單管理")]),y(Ne)])])])])}}}),ta=be(aa,[["__scopeId","data-v-a382c8a7"]]);export{ta as default};
